# Semester Project
**Course:** CS7250  
**Term:** Fall 2025 – Professor Bogden  
**Team:** Ben Darby & Ben Henshaw  

---

# App Name: PJM ECHO
### *A Visual Analytics Tool for PJM Market Forecasting*

---

## Project Overview

### Purpose
**This application serves as a financial risk analysis tool for the PJM wholesale electricity market.**

Large companies often need to balance their purchases and buy extra power, but the final "delivered" price is volatile due to the distance between generation and load. Bottlenecks in the power grid—known as **"congestion"**— can be a very large, unpredictable cost, reaching up to **$100,000 an hour** in recent events for a moderately sized 200MW purchase.

Our app uses historical price data to help users forecast that risk. The workflow allows users to:
1.  **Select a future time period** where they anticipate needing to make a purchase.
2.  **Look up similar system conditions** ("like days") in the past using predictive features.
3.  **Compare known generation offers** against historical performance to determine which options are the most stable and cost-effective.

### The Problem We Address: Congestion & Basis Risk
In ISO markets like PJM, simply securing generation to match your load does not eliminate financial risk. Market participants remain exposed to **price congestion**— the volatile price difference between zones which is required to keep the system in balance. 

This "basis risk" cannot be preset. While third-party financial products exist to hedge this risk, purchasing them blindly leaves significant value on the table. To determine the true value of congestion risk, participants must understand the specific **situational context**— and using this application will enable them to analyze historical "like days" based on:

*   Calendar dates & seasonality
*   Days of the week & Hours of the day
*   Real-time transmission constraints

### Target Audience
This tool is designed for **Electricity Procurement Specialists, Energy Traders, Risk Managers, and Market Analysts** who wish to visualize complex inter-zonal relationships.

We specifically target professionals **willing to "do the homework"**— This tool is for users who aren't satisfied with just asking a broker for their take; it is for those who would rather dig into the data themselves, turning historical patterns into actionable strategies for the Real-Time and Day-Ahead markets.

---

## Key Terms & Acronyms
*Essential vocabulary for understanding the domain logic of this application.*

| Acronym / Term | Full Name | What it is & Why it matters |
| :--- | :--- | :--- |
| **PJM** | **Pennsylvania-New Jersey-Maryland** | **The Grid Operator.** PJM is the Regional Transmission Organization (RTO) that manages the high-voltage electric grid for 13 states and DC, it's original footprint was the three states in the acronym plus Delaware (which got no mention). <br> *Relevance:* This project exclusively visualizes data generated by the PJM market. |
| **LMP** | **Locational Marginal Price** | **The Price Tag.** The cost to buy one megawatt-hour(MWhr) of electricity at a specific location and time. It is the sum of three parts: Energy + **Congestion** + Losses. It comes in two price forms Day-Ahead and Real-Time <br> *Relevance:* In This App we focus on Total Energy Price as Day Ahead(DA) and Real Time(RT) and "Congestion" which lumps congestion and losses into a single unit. |
| **DA / RT** | **Day-Ahead / Real-Time** | **The Two Markets.** <br>• **Day-Ahead (DA):** A *financial* market where prices are locked in as the plan about 8-12 hours in advance based of actual flow based on forecasts and the results of a daily market auction.<br>• **Real-Time (RT):** The *physical* spot market based on actual reality of grid conditions and the required actions PJM must take to ensure balance and reliability.<br> *Relevance:* Our tool compares the "Plan" (DA) vs. the "Reality" (RT) as "NET". |
| **NET** | **Day-Ahead less Real-Time** | **The Spread.** Calculated as the Day-Ahead price minus the Real-Time price. <br> *Relevance:* This metric reveals the volatility between the financial forecast and physical reality. A positive NET indicates the Day-Ahead market was overpriced compared to actual conditions. |
| **Congestion** | **Transmission Constraints** | **The Traffic Jam Cost.** Think of this as the cost required to move power from **Zone A** to **Zone B** at **Time C**. <br> *Relevance:* When transmission lines are clogged, prices separate. This app exists specifically to visualize and predict this separation between zones. |
| **ISO / RTO** | **Independent System Operator** | **The Referee.** A non-profit organization (like PJM) that runs the power grid and the market to ensure reliability and fair competition. <br> *Relevance:* Understanding that PJM is a neutral marketplace, not a utility company, explains why public data is available. |
| **AWS RDS** | **Amazon Relational Database Service** | **The Cloud Storage.** A managed SQL database service provided by Amazon. <br> *Relevance:* We use this to host our 9GB+ dataset, allowing the app to query millions of historical rows without crashing a local machine. |

---

## Interface Preview

<div align="center">
  <img src="src/img/PJM_Map.png" alt="PJM LMP Map" width="600">
  <p><em>The interface allows users to visualize congestion deltas, filter historical data, retrieve summary information, and replay market days hour-by-hour.</em></p>

  <br>

  <img src="src/img/Query_Tool.png" alt="PJM Data Query" width="600">
  <p><em>The query page allows users to design filters matching specific date, day, time, and congestion conditions. These parameters are dynamically passed to the database to retrieve instant results.</em></p>
</div>

---

## System Architecture

The application is built on a modular architecture to ensure scalability and separation of functionality:

| Component | Tech Stack | Role |
| :--- | :--- | :--- |
| **Data Sources** | PJM Data Miner 2 & ArcGIS Online | Harnesses the PJM "Data Vault" for market data and retrieves GeoShapes for PJM zone geodata. |
| **Database** | AWS RDS (MySQL) | Currently Storing 9GB+ of historical PJM market data. |
| **Frontend** | Observable Framework (JS/D3) | Interactive visualizations and state management. |
| **Mapping** | MapLibre GL JS | High-performance vector tile mapping for zone shapes and ISO border identification. |
| **Backend** | Python (FastAPI) | Handles API requests and executes complex SQL queries. |
| **Version Control** | GitHub | Source code management and team collaboration. |

---

## Reproducibility & Setup

Follow these instructions to clone the repository, configure the environment, and run the application on your local machine.

### 1. Prerequisites
Before you begin, ensure you have the following installed on your system:
- [Git](https://git-scm.com/)
- [Conda](https://docs.conda.io/en/latest/miniconda.html)
- [Node.js & npm](https://nodejs.org/) (Required for Observable Framework)

### 2. Installation

**Clone the Repository**  
All subsequent commands should be run from the project root directory.
```bash
git clone https://github.com/nudataviz/project-fall25-darbyatNE
cd project-fall25-darbyatNE
```

### 3. Infrastructure & Data Setup (Crucial Step)

To transition this project from a static demo to a fully functional analytics tool, you must also configure the underlying data infrastructure (MySQL, PJM API, MapTiler) and ingest historical data.

**Please refer to the [`System_Architecture_and_Deployment_Guide.pdf`](System_Architecture_and_Deployment_Guide.pdf) located in the root directory.**

This document provides a comprehensive, step-by-step manual on:
*   **Acquiring Credentials:** How to set up PJM Data Miner, MapTiler, and AWS/Local MySQL accounts.
*   **Data Ingestion:** Running the Python scripts in `src/data/` to populate the database with historical market prices and other data.

> **Note:** The application requires this data foundation to be in place before the visualization features will function correctly.

### 4. Configuration (.env)

Once you have acquired your credentials as detailed in the PDF guide above, create a file named `.env` at the project root.

**Add the following keys to your `.env` file:**
```ini
PJM_API_KEY=your_pjm_api_key_here
USER=database_username
DB_PASSWORD=database_password
DB_NAME=database_name
DB_HOST=aws_rds_endpoint
DB_PORT=3306
BACKEND_URL=http://127.0.0.1:8000
MAP_KEY=your_maptiler_map_key
```
### 5. Environment Setup

Create the Conda environment using the provided YAML file. This installs all necessary Python dependencies.

```bash
# Create the environment from file
conda env create -f lmp_env.yml

# Activate the environment
conda activate lmp-env
```
### 6. Database Schema Reference

The ingestion scripts (detailed in the PDF guide) will automatically structure your database according to the schema below:

<div align="center">
  <img src="src/img/db_schema.png" alt="Schema of DB" width="600">
</div>

---

## Running the Application

1.  **Start the Observable Framework Application**  
    Run the development server using npm:
    ```bash
    npm run dev
    ```

2.  **Access the Dashboard**  
    Open your web browser and navigate to:
    ```
    http://127.0.0.1:3000
    ```

---

## Feedback & Contact

Feedback and suggestions are welcome! Please send your thoughts to:

   **Ben Darby:** darby.b@northeastern.edu

   **Ben Henshaw:** henshaw.b@northeastern.edu

### Additional Documentation
**For a detailed overview of our methodology and project scope, please refer to the [`proposal.md`](proposal.md) located in the root directory.**
