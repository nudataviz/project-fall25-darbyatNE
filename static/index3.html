<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PJM LMP Real-Time Map</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
     crossorigin=""/>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>

    <button id="filter-toggle">âš™ï¸ Filters</button>

    <div id="filter-panel">
        <button id="close-filter">&times;</button>
        <h3>Date & Time Range Filter</h3>
        
        <div class="filter-section">
            <h4>Date Range</h4>
            <div class="date-inputs">
                <div class="date-input-row">
                    <label>Start:</label>
                    <input type="date" id="start-date" value="2025-07-13">
                </div>
                <div class="date-input-row">
                    <label>End:</label>
                    <input type="date" id="end-date" value="2025-07-19">
                </div>
            </div>
        </div>

        <div class="filter-section">
            <h4>Days of Week</h4>
            <div class="days-container">
                <button class="day-button" data-day="0">Sun</button>
                <button class="day-button active" data-day="1">Mon</button>
                <button class="day-button active" data-day="2">Tue</button>
                <button class="day-button active" data-day="3">Wed</button>
                <button class="day-button active" data-day="4">Thu</button>
                <button class="day-button active" data-day="5">Fri</button>
                <button class="day-button" data-day="6">Sat</button>
            </div>
        </div>

        <div class="filter-section">
            <h4>Time Range</h4>
            <div id="time-display">15:00 â€” 20:00</div>
            <div id="time-slider-container">
                <svg id="time-slider-svg" width="100%" height="80"></svg>
            </div>
        </div>

        <button class="apply-filter-btn" id="apply-filter">ğŸ” Apply Filter & Load Data</button>
        <button class="apply-filter-btn" id="save-filter" style="background: #17a2b8;">ğŸ’¾ Save Current Filter</button>

        <div class="saved-filters">
            <h4>Saved Filters</h4>
            <div id="saved-filters-list">
                <div style="color: #666; font-style: italic; font-size: 12px;">No saved filters yet</div>
            </div>
        </div>
    </div>

    <div id="map-container">
        <div id="map"></div>
    </div>
    
    <div id="controls-container">
        <button id="play-pause-button">â–¶ Play</button>
        <input type="range" id="hour-slider" min="0" max="0" value="0" step="1">
        <div id="current-time-display">Click "Apply Filter & Load Data" to begin</div>
    </div>

    <!-- External Libraries -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
     crossorigin=""></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- Custom JavaScript Modules -->
    <script src="/static/js/config.js"></script>
    <script src="/static/js/state.js"></script>
    <script src="/static/js/map.js"></script>
    <script src="/static/js/filters.js"></script>
    <script src="/static/js/timeSlider.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/animation.js"></script>
    <script src="/static/js/main.js"></script>

</body>
</html>